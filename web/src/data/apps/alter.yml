id: 'alterhq'
name: 'Alter'
type: 'shell_script'
category: 'Productivity'
description:
  'Alter is a revolutionary tool that transforms your Mac into an intelligent assistant by
  understanding your digital activity and providing contextual suggestions and automation.'
url: 'https://alterhq.com/'
image: '/icons/alter.png'
tags:
  - productivity
  - automation
  - ai
  - assistant
  - beta
notes: |
  Special installation process:
  - Downloads latest beta version from appcast.xml
  - Uses simple bash script with curl and regex
  - Beta software - may have bugs
  - Revolutionary AI-powered Mac assistant
  - Automatically launches after installation
requires_license: false
selected_by_default: false
install: |
  #!/bin/bash
  set -e

  echo "üîç Finding latest Alter beta download URL..."

  # Get the download URL from the appcast.xml file
  DOWNLOAD_URL=$(curl -s "https://storage.googleapis.com/alter-releases/beta/appcast.xml" | grep -o '<enclosure url="[^"]*"' | sed 's/<enclosure url="//;s/"//' | head -1)

  if [ -z "$DOWNLOAD_URL" ]; then
      echo "‚ùå Could not find Alter download URL in appcast.xml"
      exit 1
  fi
  echo "üì• Downloading from: $DOWNLOAD_URL"

  # Create temporary directory
  TEMP_DIR=$(mktemp -d)
  ZIP_FILE="$TEMP_DIR/alter.zip"

  # Download the ZIP file
  curl -L -o "$ZIP_FILE" "$DOWNLOAD_URL"

  if [ ! -f "$ZIP_FILE" ]; then
      echo "‚ùå Failed to download Alter ZIP"
      rm -rf "$TEMP_DIR"
      exit 1
  fi

  echo "üì¶ Extracting Alter..."

  # Extract ZIP to temporary directory
  unzip -q "$ZIP_FILE" -d "$TEMP_DIR"

  # Find the .app file in the extracted contents
  APP_FILE=$(find "$TEMP_DIR" -name "*.app" -type d | head -1)

  if [ -z "$APP_FILE" ]; then
      echo "‚ùå Could not find Alter.app in extracted files"
      rm -rf "$TEMP_DIR"
      exit 1
  fi

  echo "üì± Installing Alter to /Applications..."

  # Remove existing installation if it exists
  if [ -d "/Applications/Alter.app" ]; then
      sudo rm -rf "/Applications/Alter.app"
  fi

  # Copy to Applications
  sudo cp -R "$APP_FILE" /Applications/

  # Make executable
  sudo chmod +x "/Applications/Alter.app/Contents/MacOS/"*

  echo "üßπ Cleaning up..."
  rm -rf "$TEMP_DIR"

  echo "‚úÖ Alter installed successfully to /Applications"
  echo "üöÄ Launching Alter..."

  # Launch the application
  open "/Applications/Alter.app"

validate: |
  #!/bin/bash
  if [ -d "/Applications/Alter.app" ]; then
      echo "‚úÖ Alter is installed"
      exit 0
  else
      echo "‚ùå Alter is not installed"
      exit 1
  fi

uninstall: |
  #!/bin/bash
  set -e

  echo "üóëÔ∏è  Uninstalling Alter..."

  if [ -d "/Applications/Alter.app" ]; then
      sudo rm -rf "/Applications/Alter.app"
      echo "‚úÖ Alter uninstalled successfully"
  else
      echo "‚ÑπÔ∏è  Alter is not installed"
  fi
